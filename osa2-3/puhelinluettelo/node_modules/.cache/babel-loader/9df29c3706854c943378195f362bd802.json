{"ast":null,"code":"import _slicedToArray from\"/home/niko/Documents/FullStackOpen2022/osa2/puhelinluettelo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import noteService from'./services/update';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ShowNumbers=function ShowNumbers(_ref){var personstoShow=_ref.personstoShow,setPersons=_ref.setPersons,setErrorMessage=_ref.setErrorMessage;var personlist=personstoShow.map(function(person){return/*#__PURE__*/_jsxs(\"p\",{children:[person.name,\" \",person.number,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){if(window.confirm('Are you Sure?')){noteService.adelete(person.id).catch(function(error){noteService.getAll().then(function(initialNotes){setPersons(initialNotes);});setErrorMessage(\"\".concat(person.id,\" allready deleted from the server\"));setTimeout(function(){setErrorMessage(null);},5000);});setErrorMessage(\"\".concat(person.id,\" deleted!\"));setTimeout(function(){setErrorMessage(null);},5000);}},children:\"Delete\"})]},person.name.length+Math.random(4525));});return personlist;};var Inputs=function Inputs(_ref2){var name=_ref2.name,newName=_ref2.newName,onChange=_ref2.onChange,onClick=_ref2.onClick;return/*#__PURE__*/_jsxs(\"p\",{children:[name,\": \",/*#__PURE__*/_jsx(\"input\",{value:newName,onChange:onChange,onClick:onClick})]});};var Filters=function Filters(_ref3){var filter=_ref3.filter,onChange=_ref3.onChange,onClick=_ref3.onClick;return/*#__PURE__*/_jsxs(\"p\",{children:[\"filter shown with\",/*#__PURE__*/_jsx(\"input\",{value:filter,onChange:onChange,onClick:onClick})]});};var Notification=function Notification(_ref4){var message=_ref4.message;if(message===null){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:message});};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(persons),_useState4=_slicedToArray(_useState3,2),personstoShow=_useState4[0],setPersonstoShow=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newName=_useState6[0],setNewName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newNumber=_useState8[0],setNewNumber=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),filter=_useState10[0],setFilter=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];useEffect(function(){noteService.getAll().then(function(initialNotes){setPersons(initialNotes);});},[]);var addName=function addName(event){event.preventDefault();var found=persons.find(function(person){return person.name===newName;});if(found===undefined){var noteObject={name:newName,number:newNumber};setPersons(persons.concat(noteObject));setErrorMessage(\"added \".concat(newName,\", \").concat(newNumber));setTimeout(function(){setErrorMessage(null);},5000);setNewName('');setNewNumber('');noteService.create(noteObject);noteService.getAll().then(function(initialNotes){setPersons(initialNotes);});}else{if(window.confirm(\"\".concat(newName,\" is allready added to phonebook, replace the old number with new one?\"))){var newObject={name:found.name,number:newNumber};noteService.update(found.id,newObject).catch(function(error){setErrorMessage(\"\".concat(found.id,\" allready deleted from the server\"));setTimeout(function(){setErrorMessage(null);},5000);});setErrorMessage(\"changed \".concat(found.id,\" number to \").concat(newNumber));setTimeout(function(){setErrorMessage(null);},5000);setPersons(persons.concat(newObject));setNewName('');setNewNumber('');setPersonstoShow(persons);}}};var handleNoteChange=function handleNoteChange(event){setNewName(event.target.value);};var handleNoteClick=function handleNoteClick(event){setNewName('');};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleNumberClick=function handleNumberClick(event){setNewNumber('');};var handleFilter=function handleFilter(event){if(event.type==='change'){if(event.target.value===''){console.log(noteService.getAll);setPersonstoShow(persons);}else{setPersonstoShow(persons.filter(function(person){return person.name.toLowerCase().includes(event.target.value.toLowerCase());}));}}else if(event.type==='click'){setFilter('');setPersonstoShow(persons);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:errorMessage}),/*#__PURE__*/_jsx(\"h2\",{children:\"Filter by name\"}),/*#__PURE__*/_jsx(Filters,{value:filter,onChange:handleFilter,onClick:handleFilter}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add New\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addName,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Inputs,{name:'Name',onChange:handleNoteChange,onClick:handleNoteClick}),/*#__PURE__*/_jsx(Inputs,{name:'Number',onChange:handleNumberChange,onClick:handleNumberClick})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(ShowNumbers,{personstoShow:personstoShow,setPerson:setPersons,setErrorMessage:setErrorMessage}),\"...\"]});};export default App;","map":{"version":3,"names":["useState","useEffect","noteService","ShowNumbers","personstoShow","setPersons","setErrorMessage","personlist","map","person","name","number","window","confirm","adelete","id","catch","error","getAll","then","initialNotes","setTimeout","length","Math","random","Inputs","newName","onChange","onClick","Filters","filter","Notification","message","App","persons","setPersonstoShow","setNewName","newNumber","setNewNumber","setFilter","errorMessage","addName","event","preventDefault","found","find","undefined","noteObject","concat","create","newObject","update","handleNoteChange","target","value","handleNoteClick","handleNumberChange","handleNumberClick","handleFilter","type","console","log","toLowerCase","includes"],"sources":["/home/niko/Documents/FullStackOpen2022/osa2/puhelinluettelo/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport noteService from './services/update'\nimport './App.css'\n\n\n\n\n\nconst ShowNumbers = ({personstoShow, setPersons, setErrorMessage}) => {\n  const personlist = personstoShow.map(person => <p key={person.name.length+Math.random(4525)}>{person.name} {person.number}<button onClick={() =>{\n    if (window.confirm('Are you Sure?')) {\n    noteService.adelete(person.id).catch(error => {\n      noteService.getAll().then(initialNotes => {setPersons(initialNotes)})\n      setErrorMessage(\n        `${person.id} allready deleted from the server`)\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      \n    })\n    setErrorMessage(\n      `${person.id} deleted!`)\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 5000)\n  }\n  }}>Delete</button></p>)\n  return personlist\n}\nconst Inputs = ({name, newName, onChange, onClick}) => <p>{name}: <input value = {newName} onChange={onChange} onClick={onClick}/></p>\nconst Filters = ({filter ,onChange, onClick}) => <p>filter shown with<input value ={filter} onChange={onChange} onClick={onClick}/></p>\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [personstoShow, setPersonstoShow] = useState(persons)\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  \n  useEffect(() => {noteService.getAll().then(initialNotes => {setPersons(initialNotes)})}, [])\n\n  const addName = (event) => {\n  event.preventDefault()\n  let found = persons.find(person => person.name === newName)\n  if (found === undefined) {\n    const noteObject = {\n        name: newName,\n        number: newNumber,\n    }\n    setPersons(persons.concat(noteObject))\n    setErrorMessage(\n      `added ${newName}, ${newNumber}`\n    )\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 5000)\n    setNewName('')\n    setNewNumber('')\n    noteService.create(noteObject)\n    noteService.getAll().then(initialNotes => {setPersons(initialNotes)})\n  } else {\n\n    if (window.confirm(`${newName} is allready added to phonebook, replace the old number with new one?`)){\n      const newObject = {\n        name: found.name,\n        number: newNumber,\n      }\n      noteService.update(found.id, newObject).catch(error => {\n        setErrorMessage(\n          `${found.id} allready deleted from the server`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n\n      setErrorMessage(\n        `changed ${found.id} number to ${newNumber}`\n      )\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n\n      setPersons(persons.concat(newObject))\n      setNewName('')\n      setNewNumber('')\n      setPersonstoShow(persons)\n    }\n  }\n}\n\n  const handleNoteChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNoteClick = (event) => {\n    setNewName('')\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleNumberClick = (event) => {\n    setNewNumber('')\n  }\n\n  const handleFilter = (event) => {\n    if (event.type === 'change'){\n      if (event.target.value === ''){\n        console.log(noteService.getAll)\n        setPersonstoShow(persons)\n      } else {\n        setPersonstoShow(persons.filter(person => person.name.toLowerCase().includes(event.target.value.toLowerCase())))\n      }\n    }\n    else if (event.type === 'click'){\n      setFilter('')\n      setPersonstoShow(persons)\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={errorMessage} />\n      <h2>Filter by name</h2>\n      <Filters value ={filter} onChange={handleFilter} onClick={handleFilter}/>\n      <h2>Add New</h2>\n      <form onSubmit={addName}>\n        <div>\n          <Inputs name={'Name'} onChange={handleNoteChange} onClick={handleNoteClick} />\n          <Inputs name={'Number'} onChange={handleNumberChange} onClick={handleNumberClick} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n      <ShowNumbers personstoShow = {personstoShow} setPerson={setPersons} setErrorMessage={setErrorMessage}/>\n      ...\n    </div>\n  )\n\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module"}